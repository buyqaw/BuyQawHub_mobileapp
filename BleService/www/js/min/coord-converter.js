/*! UTM to LatLon conversion functions (and vice versa) copyright 1997-1998 by Charles L. Taylor */
;var vr_cc={determineLatLon:function(e){var c=new Array(2);var f=new Array(2);var b;var d;var a={lat:0,lon:0};if(d=e.match(/^(\d{1,3})\s+(\d{1,3})\s+(\d+(?:\.\d+)?)\s?([NnSs])?\s+(\d{1,3})\s+(\d{1,3})\s+(\d+(?:\.\d+)?)\s?([WwEe])?\s?$/)){a.lat=Number(Number(d[1])+(d[2]/60)+(d[3]/3600)).toFixed(8);a.lat=(d[4]&&(d[4]=="S"||d[4]=="s"))||(!d[4]&&vr_cc.compassNS=="S")?a.lat*-1:Number(a.lat);a.lon=Number(Number(d[5])+(d[6]/60)+(d[7]/3600)).toFixed(8);a.lon=(d[8]&&(d[8]=="W"||d[8]=="w"))||(!d[8]&&vr_cc.compassEW=="W")?a.lon*-1:Number(a.lon)}else{if(d=e.match(/^((?:\d{1,3}\s+){1})((?:\d+(?:\.\d+)?))\s?([NnSs])?\s+((?:\d{1,3}\s+){1})((?:\d+(?:\.\d+)?))\s?([WwEe])?\s*$/)){a.lat=Number(Number(d[1])+(d[2]/60)).toFixed(8);a.lat=(d[3]&&(d[3]=="S"||d[3]=="s"))||(!d[3]&&vr_cc.compassNS=="S")?a.lat*-1:Number(a.lat);a.lon=Number(Number(d[4])+(d[5]/60)).toFixed(8);a.lon=(d[6]&&(d[6]=="W"||d[6]=="w"))||(!d[6]&&vr_cc.compassEW=="W")?a.lon*-1:Number(a.lon)}else{if(d=e.match(/^([+-]?\d{1,3}(?:\.\d+)?)\s?([NnSs])?\s+([+-]?\d{1,3}(?:\.\d+)?)\s?([WwEe])?\s*$/)){a.lat=Number(d[1]).toFixed(8);a.lat=(d[2]&&(d[2]=="S"||d[2]=="s"))||(!d[2]&&a.lat>0&&vr_cc.compassNS=="S")?a.lat*-1:Number(a.lat);a.lon=Number(d[3]).toFixed(8);a.lon=(d[4]&&(d[4]=="W"||d[4]=="w"))||(!d[4]&&a.lon>0&&vr_cc.compassEW=="W")?a.lon*-1:Number(a.lon)}else{if(d=e.match(/^(\d+)(\s*[NnSs])?\s+(\d{6})\s+(\d{7})\s*$/)){b=Number(d[1]);f[0]=Number(d[3]);f[1]=Number(d[4]);if(b>0&&b<=60){vr_cc.UTMXYToLatLon(f[0],f[1],b,(d[2]&&(d[2]=="S"||d[2]=="s"))||(!d[2]&&vr_cc.compassNS=="S")?true:false,c);a.lat=Number(Number(vr_cc.RadToDeg(c[0])).toFixed(8));a.lon=Number(Number(vr_cc.RadToDeg(c[1])).toFixed(8))}}}}}return a},formatLatLon:function(g,h){var c=new Array(2);var f=new Array(2);var b;var d,e;var a={dd:"",ddm:"",dms:"",utm:""};a.dd='<span style="padding-right: 0.5em;">'+Number(g).toFixed(8)+",</span><span>"+Number(h).toFixed(8)+"<span>";c[0]=Math.abs(g);c[1]=Math.abs(h);a.ddm='<span style="padding-right: 0.5em;">'+parseInt(c[0])+"&deg; "+Number((c[0]-parseInt(c[0]))*60).toFixed(3)+(g<0?"' S":"' N")+"</span><span>"+parseInt(c[1])+"&deg; "+Number((c[1]-parseInt(c[1]))*60).toFixed(3)+(h<0?"' W":"' E")+"</span>";d=Number((c[0]-parseInt(c[0]))*60);e=Number((c[1]-parseInt(c[1]))*60);a.dms='<span style="padding-right: 0.5em;">'+parseInt(c[0])+"&deg; "+parseInt(d)+"' "+Number((d-parseInt(d))*60).toFixed(1)+(g<0?'" S':'" N')+"</span><span>"+parseInt(c[1])+"&deg; "+parseInt(e)+"' "+Number((e-parseInt(e))*60).toFixed(1)+(h<0?'" W':'" E')+"</span>";b=Math.floor((h+180)/6)+1;b=vr_cc.LatLonToUTMXY(vr_cc.DegToRad(g),vr_cc.DegToRad(h),b,f);a.utm='<span style="padding-right: 0.5em;">'+b+(g<0?"S":"N")+'</span><span style="padding-right: 0.5em;">'+Number(f[0]).toFixed(0)+"</span><span>"+Number(f[1]).toFixed(0)+"</span>";return a},displayCoordinates:function(a,b){$(a).empty().append($('<div style="display:table-row;">').css("padding-bottom","0.25em").html('<span style="display:table-cell;padding-right:2em;">DD</span>'+b.dd)).append($('<div style="display:table-row;">').css("padding-bottom","0.25em").html('<span style="display:table-cell;">DMS</span>'+b.dms)).append($('<div style="display:table-row;">').css("padding-bottom","0.25em").html('<span style="display:table-cell;">DDM</span>'+b.ddm)).append($('<div style="display:table-row;">').html('<span style="display:table-cell;">UTM</span>'+b.utm))},setCompassDesignators:function(a,b){vr_cc.compassNS=a<0?"S":"N";vr_cc.compassEW=b<0?"W":"E"},pi:3.14159265358979,sm_a:6378137,sm_b:6356752.314,sm_EccSquared:0.00669437999013,UTMScaleFactor:0.9996,compassNS:"N",compassEW:"W",DegToRad:function(a){return(a/180*vr_cc.pi)},RadToDeg:function(a){return(a/vr_cc.pi*180)},ArcLengthOfMeridian:function(c){var e,d,b,h,g,f;var a;f=(vr_cc.sm_a-vr_cc.sm_b)/(vr_cc.sm_a+vr_cc.sm_b);e=((vr_cc.sm_a+vr_cc.sm_b)/2)*(1+(Math.pow(f,2)/4)+(Math.pow(f,4)/64));d=(-3*f/2)+(9*Math.pow(f,3)/16)+(-3*Math.pow(f,5)/32);b=(15*Math.pow(f,2)/16)+(-15*Math.pow(f,4)/32);h=(-35*Math.pow(f,3)/48)+(105*Math.pow(f,5)/256);g=(315*Math.pow(f,4)/512);a=e*(c+(d*Math.sin(2*c))+(b*Math.sin(4*c))+(h*Math.sin(6*c))+(g*Math.sin(8*c)));return a},UTMCentralMeridian:function(a){var b;b=vr_cc.DegToRad(-183+(a*6));return b},FootpointLatitude:function(f){var g,h,d,e,a,c,b;var i;b=(vr_cc.sm_a-vr_cc.sm_b)/(vr_cc.sm_a+vr_cc.sm_b);h=((vr_cc.sm_a+vr_cc.sm_b)/2)*(1+(Math.pow(b,2)/4)+(Math.pow(b,4)/64));g=f/h;d=(3*b/2)+(-27*Math.pow(b,3)/32)+(269*Math.pow(b,5)/512);e=(21*Math.pow(b,2)/16)+(-55*Math.pow(b,4)/32);a=(151*Math.pow(b,3)/96)+(-417*Math.pow(b,5)/128);c=(1097*Math.pow(b,4)/512);i=g+(d*Math.sin(2*g))+(e*Math.sin(4*g))+(a*Math.sin(6*g))+(c*Math.sin(8*g));return i},MapLatLonToXY:function(n,k,c,r){var m,a,o,p,j,f;var i,g,e,d,b,q;var h;o=(Math.pow(vr_cc.sm_a,2)-Math.pow(vr_cc.sm_b,2))/Math.pow(vr_cc.sm_b,2);a=o*Math.pow(Math.cos(n),2);m=Math.pow(vr_cc.sm_a,2)/(vr_cc.sm_b*Math.sqrt(1+a));p=Math.tan(n);j=p*p;h=(j*j*j)-Math.pow(p,6);f=k-c;i=1-j+a;g=5-j+9*a+4*(a*a);e=5-18*j+(j*j)+14*a-58*j*a;d=61-58*j+(j*j)+270*a-330*j*a;b=61-479*j+179*(j*j)-(j*j*j);q=1385-3111*j+543*(j*j)-(j*j*j);r[0]=m*Math.cos(n)*f+(m/6*Math.pow(Math.cos(n),3)*i*Math.pow(f,3))+(m/120*Math.pow(Math.cos(n),5)*e*Math.pow(f,5))+(m/5040*Math.pow(Math.cos(n),7)*b*Math.pow(f,7));r[1]=vr_cc.ArcLengthOfMeridian(n)+(p/2*m*Math.pow(Math.cos(n),2)*Math.pow(f,2))+(p/24*m*Math.pow(Math.cos(n),4)*g*Math.pow(f,4))+(p/720*m*Math.pow(Math.cos(n),6)*d*Math.pow(f,6))+(p/40320*m*Math.pow(Math.cos(n),8)*q*Math.pow(f,8))},MapXYToLatLon:function(k,j,b,n){var w,h,o,t,C,f,z,v,p;var d,u,i,a,r,e,A,l;var B,m,c,s,g,D,q;w=vr_cc.FootpointLatitude(j);C=(Math.pow(vr_cc.sm_a,2)-Math.pow(vr_cc.sm_b,2))/Math.pow(vr_cc.sm_b,2);p=Math.cos(w);t=C*Math.pow(p,2);h=Math.pow(vr_cc.sm_a,2)/(vr_cc.sm_b*Math.sqrt(1+t));o=h;f=Math.tan(w);z=f*f;v=z*z;d=1/(o*p);o*=h;u=f/(2*o);o*=h;i=1/(6*o*p);o*=h;a=f/(24*o);o*=h;r=1/(120*o*p);o*=h;e=f/(720*o);o*=h;A=1/(5040*o*p);o*=h;l=f/(40320*o);B=-1-t;m=-1-2*z-t;c=5+3*z+6*t-6*z*t-3*(t*t)-9*z*(t*t);s=5+28*z+24*v+6*t+8*z*t;g=-61-90*z-45*v-107*t+162*z*t;D=-61-662*z-1320*v-720*(v*z);q=1385+3633*z+4095*v+1575*(v*z);n[0]=w+u*B*(k*k)+a*c*Math.pow(k,4)+e*g*Math.pow(k,6)+l*q*Math.pow(k,8);n[1]=b+d*k+i*m*Math.pow(k,3)+r*s*Math.pow(k,5)+A*D*Math.pow(k,7)},LatLonToUTMXY:function(c,d,a,b){vr_cc.MapLatLonToXY(c,d,vr_cc.UTMCentralMeridian(a),b);b[0]=b[0]*vr_cc.UTMScaleFactor+500000;b[1]=b[1]*vr_cc.UTMScaleFactor;if(b[1]<0){b[1]=b[1]+10000000}return a},UTMXYToLatLon:function(a,f,b,e,d){var c;a-=500000;a/=vr_cc.UTMScaleFactor;if(e){f-=10000000}f/=vr_cc.UTMScaleFactor;c=vr_cc.UTMCentralMeridian(b);vr_cc.MapXYToLatLon(a,f,c,d)}};