/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var meUAS_setPageParamsHandler=function(){$.extend(g_pageParams,{unavailabilityPeriodId:$(this).attr("data-vr-rupid")?$(this).attr("data-vr-rupid"):-1});window.sessionStorage.setItem("meUA_pageParams",JSON.stringify(g_pageParams));volunteerRescue.changePage($(this));return false};$("#meUAS_page").on("pageshow",function(){vr_device.googleAnalytics();g_pageParams=JSON.parse(window.sessionStorage.getItem("meUA_pageParams"));$("#meUAS_pageTitle").text(g_pageParams.op=="specific"?"Specific unavailability":"Weekly unavailability");$("img#meUAS_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));volunteerRescue.callAPI(volunteerRescue.currentSite,g_pageParams.op=="specific"?"me_unavailability_specific":"me_unavailability_weekly","Retrieving unavailability periods...",function(d){var a=$("#meUAS_lstUnavailability");var c;var b;$(a).empty();if(d.unavailability.length>0){for(b in d.unavailability){if(d.unavailability[b].canUpdate==true){c=$("<a>").attr("href","me_unavailability_specific_edit.html").attr("data-vr-rupid",d.unavailability[b].unavailabilityPeriodId);c.click(meUAS_setPageParamsHandler)}else{c=$("<div>")}c.append($("<div>").text("Description: "+(d.unavailability[b].description?d.unavailability[b].description:"")));if(g_pageParams.op!="specific"){if(d.unavailability[b].startAt){c.append($("<div>").text("Start at: "+d.unavailability[b].startAt))}if(d.unavailability[b].endAt){c.append($("<div>").text("End at: "+d.unavailability[b].endAt))}}c.append($("<div>").text("Start time: "+d.unavailability[b].startTime)).append($("<div>").text("End time: "+d.unavailability[b].endTime));$(a).append($("<li>",{"data-role":"list-divider","data-theme":"b"}).text(g_pageParams.op=="specific"?d.unavailability[b].date:"Every "+d.unavailability[b].day)).append($("<li>").append(c))}}else{$(a).append("<li>You have no "+g_pageParams.op+" unavailable periods.</li>")}$(a).listview("refresh")});$("#meUAS_btnAddPeriod").click(meUAS_setPageParamsHandler)});