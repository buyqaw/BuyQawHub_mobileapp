/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var stAME_amdrs;var stAME_pacings;var stAME_saveClickHandler=function(a){var b=volunteerRescue.checkFields(a,"stAME_");if(b==true){stAME_amdrs[g_pageParams.amdrUUID]={description:$("#stAME_description").val(),pacing:$("#stAME_pacing").val(),leg1:$("#stAME_leg1").val(),leg2:$("#stAME_leg2").val(),leg3:$("#stAME_leg3").val(),leg4:$("#stAME_leg4").val(),leg5:$("#stAME_leg5").val(),leg6:$("#stAME_leg6").val(),leg7:$("#stAME_leg7").val(),leg8:$("#stAME_leg8").val(),amdrPaces:$("#stAME_amdr_paces").val(),amdrMetres:$("#stAME_amdr_metres").val()};stAME_amdrs=volunteerRescue.sortAssociative(stAME_amdrs);vr_device.localStorage.setItem("stAMDRs",JSON.stringify(stAME_amdrs));window.history.back()}return false};var stAME_deleteClickHandler=function(){volunteerRescue.confirmationDialog("Are you sure you want to delete the AMDR from the list ?",function(){delete stAME_amdrs[g_pageParams.amdrUUID];vr_device.localStorage.setItem("stAMDRs",JSON.stringify(stAME_amdrs));window.history.back()},function(){});return false};$("#stAME_pacing").change(function(){$("#stAME_leg1").change()});$('[id^="stAME_leg"]').change(function(){var b=0;var a=0;var c;c=parseInt($("#stAME_leg1").val());if(!isNaN(c)){b+=c;a++}c=parseInt($("#stAME_leg2").val());if(!isNaN(c)){b+=c;a++}c=parseInt($("#stAME_leg3").val());if(!isNaN(c)){b+=c;a++}c=parseInt($("#stAME_leg4").val());if(!isNaN(c)){b+=c;a++}c=parseInt($("#stAME_leg5").val());if(!isNaN(c)){b+=c;a++}c=parseInt($("#stAME_leg6").val());if(!isNaN(c)){b+=c;a++}c=parseInt($("#stAME_leg7").val());if(!isNaN(c)){b+=c;a++}c=parseInt($("#stAME_leg8").val());if(!isNaN(c)){b+=c;a++}if($("#stAME_pacing").val()==-1){$("#stAME_amdr_paces").val("");if(a>0&&b>0){$("#stAME_amdr_metres").val(Number(b/a).toFixed(2))}else{$("#stAME_amdr_metres").val("")}}else{if(a>0&&b>0){$("#stAME_amdr_paces").val(Number(b/a).toFixed(2));$("#stAME_amdr_metres").val(Number(((Number(stAME_pacings[$("#stAME_pacing").val()].paces))/100)*Number(b/a)).toFixed(2))}else{$("#stAME_amdr_paces").val("");$("#stAME_amdr_metres").val("")}}});$("#stAME_page").on("pageshow",function(){var a={description:{value:"",required:true},pacing:{value:""},leg1:{value:""},leg2:{value:""},leg3:{value:""},leg4:{value:""},leg5:{value:""},leg6:{value:""},leg7:{value:""},leg8:{value:""},amdr_paces:{value:""},amdr_metres:{value:"",required:true}};var c;var b;vr_device.googleAnalytics();stAME_pacings=vr_device.localStorage.getItem("manPacings");b=$("#stAME_pacing");b.empty().append($('<option value="-1" selected>None (Enter legs in metres)</option>')).selectmenu("refresh",true);if(stAME_pacings&&stAME_pacings!="{}"){stAME_pacings=JSON.parse(stAME_pacings);for(c in stAME_pacings){b.append($('<option value="'+c+'">'+stAME_pacings[c].description+"</option>"))}}g_pageParams=JSON.parse(window.sessionStorage.getItem("stAML_pageParams"));stAME_amdrs=vr_device.localStorage.getItem("stAMDRs");if(stAME_amdrs){stAME_amdrs=JSON.parse(stAME_amdrs)}if(!stAME_amdrs||(g_pageParams.adding==false&&!stAME_amdrs[g_pageParams.amdrUUID])){window.history.back()}$("img#stAME_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));if(g_pageParams.adding==false){a.description.value=stAME_amdrs[g_pageParams.amdrUUID].description;a.pacing.value=stAME_amdrs[g_pageParams.amdrUUID].pacing;a.leg1.value=stAME_amdrs[g_pageParams.amdrUUID].leg1;a.leg2.value=stAME_amdrs[g_pageParams.amdrUUID].leg2;a.leg3.value=stAME_amdrs[g_pageParams.amdrUUID].leg3;a.leg4.value=stAME_amdrs[g_pageParams.amdrUUID].leg4;a.leg5.value=stAME_amdrs[g_pageParams.amdrUUID].leg5;a.leg6.value=stAME_amdrs[g_pageParams.amdrUUID].leg6;a.leg7.value=stAME_amdrs[g_pageParams.amdrUUID].leg7;a.leg8.value=stAME_amdrs[g_pageParams.amdrUUID].leg8;a.amdr_paces.value=stAME_amdrs[g_pageParams.amdrUUID].amdrPaces;a.amdr_metres.value=stAME_amdrs[g_pageParams.amdrUUID].amdrMetres;$("#stAME_deleteForm").css("display","inline-block")}else{$("#stAME_deleteForm").css("display","none")}volunteerRescue.populateFields(a,"stAME_");$("#stAME_pacing").selectmenu("refresh",true);$("#stAME_deleteForm").off("click",stAME_deleteClickHandler).on("click",stAME_deleteClickHandler);$("#stAME_submitForm").off("click",stAME_saveClickHandler).on("click",{apiResponse:a},stAME_saveClickHandler);$("#stAME_form").submit({apiResponse:a},stAME_saveClickHandler)});