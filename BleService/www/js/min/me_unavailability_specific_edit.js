/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var meUASE_saveClickHandler=function(a){var b=volunteerRescue.checkFields(a,"meUASE_");if(b==true){volunteerRescue.callAPI(volunteerRescue.currentSite,(g_pageParams.op=="specific"?"me_unavailability_specific/":"me_unavailability_weekly/")+g_pageParams.unavailabilityPeriodId,"Saving...",function(c){window.history.back()},null,null,{type:g_pageParams.unavailabilityPeriodId!=-1?"PUT":"POST",data:{description:$("#meUASE_description").val(),day:$("#meUASE_day").val(),startAt:$("#meUASE_startAt").val(),endAt:$("#meUASE_endAt").val(),startTime:$("#meUASE_startTime").val(),endTime:$("#meUASE_endTime").val()}})}return false};var meUASE_deleteClickHandler=function(a){volunteerRescue.confirmationDialog("Are you sure you want to delete the period ?",function(){volunteerRescue.callAPI(volunteerRescue.currentSite,(g_pageParams.op=="specific"?"me_unavailability_specific/":"me_unavailability_weekly/")+g_pageParams.unavailabilityPeriodId,"Deleting...",function(b){window.history.back()},null,null,{type:"DELETE"})},function(){});return false};$("#meUASE_page").on("pageshow",function(){vr_device.googleAnalytics();g_pageParams=JSON.parse(window.sessionStorage.getItem("meUA_pageParams"));$("img#meUASE_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));volunteerRescue.callAPI(volunteerRescue.currentSite,(g_pageParams.op=="specific"?"me_unavailability_specific/":"me_unavailability_weekly/")+g_pageParams.unavailabilityPeriodId,"Retrieving details...",function(c){var b;var a=$("#meUASE_day");a.empty();if(g_pageParams.op=="weekly"){for(b in c.days){a.append($('<option value="'+b+'">'+c.days[b]+"</option>"))}}volunteerRescue.populateFields(c.unavailabilityPeriod,"meUASE_");if(g_pageParams.op=="weekly"){a.selectmenu("refresh",true)}$("#meUASE_deleteForm").off("click",meUASE_deleteClickHandler).on("click",meUASE_deleteClickHandler);$("#meUASE_submitForm").off("click",meUASE_saveClickHandler).on("click",{apiResponse:c.unavailabilityPeriod},meUASE_saveClickHandler);$("#meUASE_form").submit({apiResponse:c.unavailabilityPeriod},meUASE_saveClickHandler)});$("#meUASE_deleteForm").css("display",(g_pageParams.unavailabilityPeriodId!=-1?"inline-block":"none"));if(g_pageParams.op=="specific"){$("#meUASE_divDay").css("display","none");$("#meUASE_lblStartAt").text("Date");$("#meUASE_hlpEndAtSpecific").css("display","block");$("#meUASE_hlpStartAtWeekly").css("display","none");$("#meUASE_hlpEndAtWeekly").css("display","none");$("#meUASE_divEndAt").css("display",(g_pageParams.unavailabilityPeriodId!=-1?"none":"block"))}else{$("#meUASE_divDay").css("display","block");$("#meUASE_lblStartAt").text("Start at");$("#meUASE_hlpEndAtSpecific").css("display","none");$("#meUASE_hlpStartAtWeekly").css("display","block");$("#meUASE_hlpEndAtWeekly").css("display","block")}});$(document).on("pagecreate create",volunteerRescue.setDateFields);