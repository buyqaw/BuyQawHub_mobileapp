/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var mePCU_saveClickHandler=function(a){volunteerRescue.callAPI(volunteerRescue.currentSite,"me_callout_update/"+g_pageParams.calloutId,g_pageParams.action=="update"?"Updating...":"Standing down...",function(b){window.history.go(-2)},null,null,{type:"PUT",data:{action:g_pageParams.action,subject:$("#mePCU_subject").val(),voiceMessage:$("#mePCU_voiceMessage").val(),textMessage:$("#mePCU_textMessage").val(),phoneMenu:$("#mePCU_phoneMenu").val(),voiceAsText:$("#mePCU_voiceAsText").prop("checked")}});return false};$("#mePCU_page").on("pageshow",function(){vr_device.googleAnalytics();g_pageParams=JSON.parse(window.sessionStorage.getItem("mePCP_pageParams"));$("img#mePCU_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));$("#mePCU_divVoiceMessage, #mePCU_divTextMessage, #mePCU_divVoiceAsText").css("display","none");if(g_pageParams.action=="update"){$("#mePCU_pageTitle").text("Update - "+g_pageParams.subject);$("#mePCU_submitForm").text("Update")}else{$("#mePCU_pageTitle").text("Stand down - "+g_pageParams.subject);$("#mePCU_submitForm").text("Stand down")}volunteerRescue.callAPI(volunteerRescue.currentSite,"me_callout_update/"+g_pageParams.calloutId,"Retrieving details...",function(a){volunteerRescue.populateFields(a,"mePCU_");$("#mePCU_divVoiceMessage, #mePCU_divTextMessage, #mePCU_divVoiceAsText").css("display","block");$("#mePCU_voiceAsText").checkboxradio("refresh",true);$("#mePCU_phoneMenu").selectmenu("refresh",true);$("#mePCU_subject").focus();$("#mePCU_submitForm").off("click",mePCU_saveClickHandler).on("click",{apiResponse:a},mePCU_saveClickHandler);$("#mePCU_form").submit({apiResponse:a},mePCU_saveClickHandler);$("input#mePCU_voiceAsText").change(function(){$("#mePCU_divTextMessage").css("display",$(this).prop("checked")==true?"none":"block")}).change();$("textarea[id=mePCU_voiceMessage]").keyup(function(){$('label[for="mePCU_voiceMessage"]').text("Voice message: ("+$(this).val().length+")")}).keyup();$("textarea[id=mePCU_textMessage]").keyup(function(){$('label[for="mePCU_textMessage"]').text("Text message: ("+$(this).val().length+")")}).keyup()},null,null,{type:"GET",data:{action:g_pageParams.action}})});