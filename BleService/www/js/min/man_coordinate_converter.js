/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var manCC_map=null;var manCC_centerMap=true;var manCC_ptOne;var manCC_mkrOne;$("#manCC_page").on("pageshow",function(){vr_device.googleAnalytics();$("img#manCC_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));$("#manCC_btnRefresh").click();if(g_onLine==true){$("#manCC_btnShowMap").css("display","block")}else{$("#manCC_divOffline").css("display","block")}});$("#manCC_btnRefresh").click(function(){if(vr_device.geolocation&&vr_device.geolocation.getCurrentPosition){$.mobile.loading("show",{theme:"a",text:"Retrieving current position..."});vr_device.geolocation.getCurrentPosition(function(a){vr_cc.setCompassDesignators(a.coords.latitude,a.coords.longitude);vr_cc.displayCoordinates("#manCC_formatted",vr_cc.formatLatLon(a.coords.latitude,a.coords.longitude));manCC_ptOne=new LatLon(a.coords.latitude,a.coords.longitude);manCC_mapManagePoints();$.mobile.loading("hide");volunteerRescue.messageDialog("Information","<p>The retrieved position is accurate to "+Number(a.coords.accuracy).toFixed(2)+" metres.</p>",null)},function(a){$.mobile.loading("hide");volunteerRescue.messageDialog("Error","<p>Unable to determine current position:"+a.message+"</p>",null)},{enableHighAccuracy:true,maximumAge:30000,timeout:30000})}return false});$("#manCC_coordinates").change(function(){var a=vr_cc.determineLatLon($(this).val());vr_cc.displayCoordinates("#manCC_formatted",vr_cc.formatLatLon(a.lat,a.lon));manCC_ptOne=new LatLon(a.lat,a.lon);manCC_mapManagePoints()});$("#manCC_btnShowMap").click(function(){$(this).remove();if(manCC_map==null){$("#manCC_mapCanvas").css("display","block");if(typeof google=="undefined"){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="https://maps-api-ssl.google.com/maps/api/js?key=AIzaSyBDQfGuTaIZxmRmQ5BCgZdQba8qoWdeUvY&sensor=false&callback=manCC_mapsApiLoaded";document.body.appendChild(a)}else{manCC_mapsApiLoaded()}}else{manCC_mapsApiLoaded()}return false});var manCC_mapsApiLoaded=function(){if(manCC_map==null){manCC_map=new google.maps.Map($("#manCC_mapCanvas")[0],{zoom:10,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.TERRAIN,panControl:false,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},scaleControl:false});manCC_mkrOne=new google.maps.Marker({map:manCC_map,title:"First Point"})}if(manCC_map!=null){google.maps.event.addListener(manCC_map,"click",function(a){vr_cc.displayCoordinates("#manCC_formatted",vr_cc.formatLatLon(a.latLng.lat(),a.latLng.lng()));manCC_ptOne=new LatLon(a.latLng.lat(),a.latLng.lng());manCC_centerMap=false;manCC_mapManagePoints()});manCC_mapManagePoints()}};var manCC_mapManagePoints=function(){var a=null;if(manCC_map==null){return}a=new google.maps.LatLng(manCC_ptOne.lat(),manCC_ptOne.lon());manCC_mkrOne.setOptions({position:a,visible:true});if(manCC_centerMap==true){manCC_map.setCenter(manCC_mkrOne.getPosition())}else{manCC_centerMap=true}};