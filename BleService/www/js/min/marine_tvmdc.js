/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var mTVMDC_calculateClickHandler=function(){var f,k,n=null,l=null,a=null,h=null,i=null,b=0,g=0;var j=[];f=$("#mTVMDC_variationEast").val();k=$("#mTVMDC_deviationEast").val();if($("#mTVMDC_true").val()!=""){n=parseFloat($("#mTVMDC_true").val());b++}if($("#mTVMDC_variationValue").val()!=""){l=parseFloat($("#mTVMDC_variationValue").val());b++}if($("#mTVMDC_magnetic").val()!=""){a=parseFloat($("#mTVMDC_magnetic").val());b++}if($("#mTVMDC_deviationValue").val()!=""){h=parseFloat($("#mTVMDC_deviationValue").val());b++}if($("#mTVMDC_compass").val()!=""){i=parseFloat($("#mTVMDC_compass").val());b++}if(n!=null&&l!=null&&a!=null){if(f=="E"){l*=-1}if(n+l!=a){j[g++]="<li>True and Variation values do not calculate to the Magnetic value</li>"}if(h==null&&i==null){j[g++]="<li>A value is required for Deviation or Compass</li>"}}else{if(i!=null&&h!=null&&a!=null){if(k=="W"){h*=-1}if(i+h!=a){j[g++]="<li>Compass and Deviation values do not calculate to the Magnetic value</li>"}if(l==null&&n==null){j[g++]="<li>A value is required for Variation or True</li>"}}else{if(b<3){j[g++]="<li>You must enter values for at least three of the fields</li>"}}}if(g==0){if(n==null){if(i==null){i=a+(h*(k=="W"?1:-1))}else{if(a==null){a=i+(h*(k=="E"?1:-1))}}n=a+(l*(f=="E"?1:-1))}else{if(i==null){if(n==null){n=a+(l*(f=="E"?1:-1))}else{if(a==null){a=n+(l*(f=="W"?1:-1))}}i=a+(h*(k=="W"?1:-1))}else{if(a==null){if(n!=null&&l!=null){a=n+(l*(f=="W"?1:-1))}else{a=i+(h*(k=="E"?1:-1))}}}}if(n<0){n=360+n}else{if(n>359){n-=360}}if(a<0){a=360+a}else{if(a>359){a-=360}}if(i<0){i=360+i}else{if(i>359){i-=360}}if(l==null){f=(n>a)?"E":"W";l=Math.abs(n-a);if(l>180){l=360-l;f=f=="E"?"W":"E"}}if(h==null){k=(i>a)?"W":"E";h=Math.abs(i-a);if(h>180){h=360-h;k=k=="E"?"W":"E"}}$("#mTVMDC_variationEast").val(f).slider("refresh");$("#mTVMDC_deviationEast").val(k).slider("refresh");$("#mTVMDC_true").val(volunteerRescue.zeroPad(n,3));$("#mTVMDC_variationValue").val(volunteerRescue.zeroPad(l,3));$("#mTVMDC_magnetic").val(volunteerRescue.zeroPad(a,3));$("#mTVMDC_deviationValue").val(volunteerRescue.zeroPad(h,3));$("#mTVMDC_compass").val(volunteerRescue.zeroPad(i,3))}else{volunteerRescue.messageDialog("Error","<p>The following errors occured</p><ul>"+j.join("")+"</ul>",null)}return false};var mTVMDC_resetClickHandler=function(){$("#mTVMDC_variationEast").val("E").slider("refresh");$("#mTVMDC_deviationEast").val("E").slider("refresh");$("#mTVMDC_true").val("");$("#mTVMDC_variationValue").val("");$("#mTVMDC_magnetic").val("");$("#mTVMDC_deviationValue").val("");$("#mTVMDC_compass").val("")};$("#mTVMDC_page").on("pageshow",function(){$("img#mTVMDC_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));$("#mTVMDC_calculate").off("click",mTVMDC_calculateClickHandler).on("click",mTVMDC_calculateClickHandler);$("#mTVMDC_reset").off("click",mTVMDC_resetClickHandler).on("click",mTVMDC_resetClickHandler)});