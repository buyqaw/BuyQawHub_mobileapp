/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var meEU_registerHandler=function(a){volunteerRescue.callAPI(volunteerRescue.currentSite,"me_event/"+a.data.eventId,a.data.register==true?"Registering...":"Unregistering...",function(b){volunteerRescue.messageDialog("Event registration",a.data.register==true?"Thank you for registering for the event":"You have been unregistered from the event",null);if(a.data.register==true){$(a.srcElement||a.target).removeClass("ui-btn-g").addClass("ui-btn-r")}else{$(a.srcElement||a.target).removeClass("ui-btn-r").addClass("ui-btn-g")}$(a.srcElement||a.target).text(a.data.register==true?"Unregister":"Register").off("click",meEU_registerHandler).on("click",{eventId:a.data.eventId,register:!a.data.register},meEU_registerHandler);$("#meEU_event_registered_"+a.data.eventId).text("Registered: "+b.registered)},null,null,{type:"PUT",data:{register:a.data.register}});return false};$("#meEU_page").on("pageshow",function(){vr_device.googleAnalytics();$("img#meEU_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));volunteerRescue.callAPI(volunteerRescue.currentSite,"me_event","Retrieving upcoming events...",function(d){var c=$("#meEU_lstEvent");var a;var b;$(c).empty();if(d.event.length>0){for(b in d.event){a=$("<li>").append("<div>");a.append($("<div>").text("Starts at: "+d.event[b].startAt)).append($("<div>").text("Ends at: "+d.event[b].endAt)).append($('<div id="meEU_event_registered_'+d.event[b].eventId+'">').text("Registered: "+d.event[b].registered));if(d.event[b].canRegister==1){a.append($("<button>").attr({"data-mini":true,"data-theme":"g"}).text("Register").click({eventId:d.event[b].eventId,register:true},meEU_registerHandler))}else{if(d.event[b].canRegister==0){a.append($("<button>").attr({"data-mini":true,"data-theme":"r"}).text("Unregister").click({eventId:d.event[b].eventId,register:false},meEU_registerHandler))}}$(c).append($("<li>",{"data-role":"list-divider","data-theme":"b"}).text(d.event[b].title)).append(a)}}else{$(c).append("<li>There are no upcoming events.</li>")}$(c).listview("refresh");$("#meEU_page").trigger("create")})});