/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var dmAR_registerClickHandler=function(){$.mobile.loading("show",{text:"Registering account"});$.ajax({url:"https://volunteerrescue.org/api/app/register/confirm",type:"POST",data:{description:$("#dmAR_txtDescription").val(),emailAddress:$("#dmAR_txtEmailAddress").val(),registrationCode:$("#dmAR_txtRegisterCode").val()},async:true,cache:false,success:function(json){var apiResponse=eval(json);var errors="";var i;$.mobile.loading("hide");if(apiResponse.result==true){var accounts=vr_device.localStorage.getItem("vrAccounts");accounts=!accounts?{}:JSON.parse(accounts);accounts[apiResponse.emailAddress]={description:apiResponse.description,emailAddress:apiResponse.emailAddress,uuid:apiResponse.uuid,publicAccount:false};accounts=volunteerRescue.sortAssociative(accounts);vr_device.localStorage.setItem("vrAccounts",JSON.stringify(accounts));volunteerRescue.messageDialog("Registered","The account has been registered.",function(){window.history.back()})}else{for(i in apiResponse.errors){errors+="<li>"+apiResponse.errors[i]+"</li>"}volunteerRescue.messageDialog("Error","<p>The following error(s) occurred</p><ul>"+errors+"</ul>",null)}},error:function(){$.mobile.loading("hide");volunteerRescue.messageDialog("Error","Unable to register the account.",null)}})};var dmAR_emailClickHandler=function(){$.mobile.loading("show",{text:"Sending e-mail"});$.ajax({url:"https://volunteerrescue.org/api/app/register/request",type:"POST",data:{description:$("#dmAR_txtDescription").val(),emailAddress:$("#dmAR_txtEmailAddress").val(),register:true},async:true,cache:false,success:function(json){var apiResponse=eval(json);var errors="";var i;$.mobile.loading("hide");if(apiResponse.result==true){volunteerRescue.messageDialog("E-mail sent","An e-mail has been sent to the e-mail address entered that contains a code for the Code field, if you do not receive the e-mail check your spam/junk folders.",null)}else{for(i in apiResponse.errors){errors+="<li>"+apiResponse.errors[i]+"</li>"}volunteerRescue.messageDialog("Error","<p>The following error(s) occurred</p><ul>"+errors+"</ul>",null)}},error:function(){$.mobile.loading("hide");volunteerRescue.messageDialog("Error","Unable to send e-mail to the e-mail address.",null)}})};$("#dmAR_page").on("pageshow",function(){vr_device.googleAnalytics();$("img#dmAR_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));$("#dmAR_txtDescription").val(null);$("#dmAR_txtEmailAddress").val(null);$("#dmAR_txtRegisterCode").val(null);$("#dmAR_registerForm").off("click",dmAR_registerClickHandler).on("click",dmAR_registerClickHandler);$("#dmAR_emailCode").off("click",dmAR_emailClickHandler).on("click",dmAR_emailClickHandler);$("#dmAR_form").submit(dmAR_registerClickHandler)});