/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var meOCPV_registerHandler=function(a){volunteerRescue.callAPI(volunteerRescue.currentSite,"me_oncall_planner/"+a.data.shift.shiftId,a.data.shift.registered==false?"Registering...":"Unregistering...",function(b){if(b.result==true){if(a.data.shift.registered==false){$(a.srcElement||a.target).removeClass("ui-icon-incorrect").addClass("ui-icon-correct").attr("data-icon","correct")}else{$(a.srcElement||a.target).removeClass("ui-icon-correct").addClass("ui-icon-incorrect").attr("data-icon","incorrect")}a.data.shift.registered=!a.data.shift.registered;$(a.srcElement||a.target).off("click",meOCPV_registerHandler).on("click",{shift:a.data.shift},meOCPV_registerHandler)}},null,null,{type:"PUT",data:{shift:a.data.shift}});return false};$("#meOCPV_page").on("pageshow",function(){vr_device.googleAnalytics();g_pageParams=JSON.parse(window.sessionStorage.getItem("meOCP_pageParams"));$("img#meOCPV_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));volunteerRescue.callAPI(volunteerRescue.currentSite,"me_oncall_planner/"+g_pageParams.icsRoleId,"Retrieving on call shifts...",function(d){var b=$("#meOCPV_lstShift");var a;var c;$(b).empty();$("#meOCPV_pageTitle").text(d.icsRole);if(d.oncall.length>0){for(c in d.oncall){a=$("<li>").append("<div>");$(b).append($("<li>").append($("<a>").append($("<div>").text(d.oncall[c].dateRange))).append($("<a>",{"data-icon":(d.oncall[c].registered==true?"correct":"incorrect"),href:"#"}).append($("<img>").addClass("ui-li-icon").attr({id:"meOCP_register_img"+c,src:g_basePath+"images/"+(d.oncall[c].registered==true?"correct-16.png":"incorrect-16.png")})).on("click",{shift:d.oncall[c]},meOCPV_registerHandler)))}}else{$(b).append("<li>There are no on call shifts.</li>")}$(b).listview("refresh")})});