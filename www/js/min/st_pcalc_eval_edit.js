/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var stPCEE_searches;var stPCEE_saveClickHandler=function(a){var c=volunteerRescue.checkFields(a,"stPCEE_");var b;var e;var d;if(c==true){if(g_pageParams.evaluatorId==-1){e="e"+stPCEE_searches[g_pageParams.searchUUID].nextEvaluatorId++;stPCEE_searches[g_pageParams.searchUUID].evaluatorCount++}else{e=g_pageParams.evaluatorId}stPCEE_searches[g_pageParams.searchUUID].evaluators[e]={description:$("#stPCEE_description").val(),regions:{}};d=stPCEE_searches[g_pageParams.searchUUID].regions;for(b in d){stPCEE_searches[g_pageParams.searchUUID].evaluators[e].regions[b]=Number($("#stPCEE_region_"+b).val())}stPCEE_searches[g_pageParams.searchUUID].evaluators=volunteerRescue.sortAssociative(stPCEE_searches[g_pageParams.searchUUID].evaluators);volunteerRescue.searchProbabilityCalculator(stPCEE_searches[g_pageParams.searchUUID],null);vr_device.localStorage.setItem("stSearches",JSON.stringify(stPCEE_searches));window.history.back()}return false};var stPCEE_deleteClickHandler=function(){volunteerRescue.confirmationDialog("Are you sure you want to delete the evaluator from the search ?",function(){delete stPCEE_searches[g_pageParams.searchUUID].evaluators[g_pageParams.evaluatorId];stPCEE_searches[g_pageParams.searchUUID].evaluatorCount--;volunteerRescue.searchProbabilityCalculator(stPCEE_searches[g_pageParams.searchUUID],null);vr_device.localStorage.setItem("stSearches",JSON.stringify(stPCEE_searches));window.history.back()},function(){});return false};$("#stPCEE_page").on("pageshow",function(){var e={description:{value:"",required:true}};var a;var d;var f;var c;var b;vr_device.googleAnalytics();g_pageParams=JSON.parse(window.sessionStorage.getItem("stPCS_pageParams"));stPCEE_searches=vr_device.localStorage.getItem("stSearches");if(stPCEE_searches){stPCEE_searches=JSON.parse(stPCEE_searches)}if(!g_pageParams||!stPCEE_searches||!stPCEE_searches[g_pageParams.searchUUID]||(g_pageParams.evaluatorId!=-1&&!stPCEE_searches[g_pageParams.searchUUID].evaluators[g_pageParams.evaluatorId])){window.history.back()}else{$("img#stPCEE_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));$("#stPCEE_pageTitle").text(g_pageParams.description+" - Evaluator");$("#stPCEE_divHelp").html("<p>Please rate each region with the probability you think the subject will be found in that region, if you think two or more regions have the same probability you can assign them the same rating.</p><p>Use ratings of <strong>1</strong> for most unlikely to <strong>9</strong> for most likely.</p>");d=$("#stPCEE_divRegions");f=stPCEE_searches[g_pageParams.searchUUID].regions;d.empty();c=stPCEE_searches[g_pageParams.searchUUID].completedSearches.length;if(g_pageParams.evaluatorId!=-1){e.description.value=stPCEE_searches[g_pageParams.searchUUID].evaluators[g_pageParams.evaluatorId].description;if(c==0){b=false;$("#stPCEE_submitForm").css("display","inline-block");$("#stPCEE_deleteForm").css("display","inline-block")}else{b=true;$("#stPCEE_submitForm").css("display","none");$("#stPCEE_deleteForm").css("display","none")}}else{b=false;$("#stPCEE_submitForm").css("display","inline-block");$("#stPCEE_deleteForm").css("display","none")}$("#stPCEE_description").prop("disabled",b);for(a in f){d.append('<div class="ui-field-contain" class="ui-field-contain ui-body ui-br"><label for="stPCEE_region_'+a+'">Region - '+f[a].description+':</label><input type="number" min="1" max="9" size="3" maxlength="3" name="stPCEE_region_'+a+'" id="stPCEE_region_'+a+'" /></div>');if(g_pageParams.evaluatorId!=-1&&stPCEE_searches[g_pageParams.searchUUID].evaluators[g_pageParams.evaluatorId].regions&&stPCEE_searches[g_pageParams.searchUUID].evaluators[g_pageParams.evaluatorId].regions[a]){$("#stPCEE_region_"+a).val(stPCEE_searches[g_pageParams.searchUUID].evaluators[g_pageParams.evaluatorId].regions[a])}$("#stPCEE_region_"+a).textinput().change(function(){if($(this).val()>9){$(this).val(9)}else{if($(this).val()<1){$(this).val(1)}}}).prop("disabled",b)}volunteerRescue.populateFields(e,"stPCEE_");$("#stPCEE_deleteForm").off("click",stPCEE_deleteClickHandler).on("click",stPCEE_deleteClickHandler);$("#stPCEE_submitForm").off("click",stPCEE_saveClickHandler).on("click",{apiResponse:e},stPCEE_saveClickHandler);$("#stPCEE_form").submit({apiResponse:e},stPCEE_saveClickHandler)}});