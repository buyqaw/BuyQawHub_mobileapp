/*! VolunteerRescue | (c) 2012 - 2018 SKRPC Holdings, Inc. 
 * http://volunteerrescue.org/app_license
 */
;var kitLIE_lists;var kitLIE_saveClickHandler=function(a){var b;var c=volunteerRescue.checkFields(a,"kitLIE_");if(c==true){b=g_pageParams.itemOffset!=-1?g_pageParams.itemOffset:kitLIE_lists[g_pageParams.kitUUID].items.length;kitLIE_lists[g_pageParams.kitUUID].items[b]={description:$("#kitLIE_description").val(),locationStorage:$("#kitLIE_locationStorage").val(),locationPack:$("#kitLIE_locationPack").val(),value:$("#kitLIE_value").val(),quantityTotal:parseInt($("#kitLIE_quantityTotal").val()),quantityRequired:parseInt($("#kitLIE_quantityRequired").val()),notes:$("#kitLIE_notes").val(),quantityInUse:g_pageParams.itemOffset==-1?0:kitLIE_lists[g_pageParams.kitUUID].items[b].quantityInUse,enabled:g_pageParams.itemOffset==-1?false:kitLIE_lists[g_pageParams.kitUUID].items[b].enabled};if(!kitLIE_lists[g_pageParams.kitUUID].items[b].quantityTotal){kitLIE_lists[g_pageParams.kitUUID].items[b].quantityTotal=1}if(kitLIE_lists[g_pageParams.kitUUID].locked==false&&kitLIE_lists[g_pageParams.kitUUID].items[b].enabled==false){kitLIE_lists[g_pageParams.kitUUID].items[b].quantityInUse=kitLIE_lists[g_pageParams.kitUUID].items[b].quantityRequired}kitLIE_lists[g_pageParams.kitUUID].items.sort(volunteerRescue.sortByObject);vr_device.localStorage.setItem("kitLists",JSON.stringify(kitLIE_lists));window.history.back()}return false};var kitLIE_deleteClickHandler=function(){volunteerRescue.confirmationDialog("Are you sure you want to delete the item from the list ?",function(){kitLIE_lists[g_pageParams.kitUUID].items.splice(g_pageParams.itemOffset,1);vr_device.localStorage.setItem("kitLists",JSON.stringify(kitLIE_lists));window.history.back()},function(){});return false};$("#kitLIE_page").on("pageshow",function(){var d={description:{value:"",required:true},locationStorage:{value:""},locationPack:{value:""},value:{value:""},quantityTotal:{value:1},quantityRequired:{value:0},notes:{value:""}};var b;var a;var c;vr_device.googleAnalytics();g_pageParams=JSON.parse(window.sessionStorage.getItem("kitL_pageParams"));kitLIE_lists=vr_device.localStorage.getItem("kitLists");if(kitLIE_lists){kitLIE_lists=JSON.parse(kitLIE_lists)}if(!kitLIE_lists||!kitLIE_lists[g_pageParams.kitUUID]||(g_pageParams.itemOffset!=-1&&!kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset])){window.history.back()}$("img#kitLIE_online").attr("src",(g_onLine==true?g_basePath+"images/online.png":g_basePath+"images/offline.png"));if(g_pageParams.itemOffset!=-1){d.description.value=kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset].description;d.locationStorage.value=kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset].locationStorage;d.locationPack.value=kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset].locationPack;d.value.value=kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset].value;d.quantityTotal.value=kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset].quantityTotal;d.quantityRequired.value=kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset].quantityRequired;d.notes.value=kitLIE_lists[g_pageParams.kitUUID].items[g_pageParams.itemOffset].notes;$("#kitLIE_deleteForm").css("display","inline-block")}else{$("#kitLIE_deleteForm").css("display","none")}volunteerRescue.populateFields(d,"kitLIE_");a=[];c=[];for(b in kitLIE_lists[g_pageParams.kitUUID].items){if(kitLIE_lists[g_pageParams.kitUUID].items[b].locationStorage&&kitLIE_lists[g_pageParams.kitUUID].items[b].locationStorage!=""&&$.inArray(kitLIE_lists[g_pageParams.kitUUID].items[b].locationStorage,a)==-1){a.push(kitLIE_lists[g_pageParams.kitUUID].items[b].locationStorage)}if(kitLIE_lists[g_pageParams.kitUUID].items[b].locationPack&&kitLIE_lists[g_pageParams.kitUUID].items[b].locationPack!=""&&$.inArray(kitLIE_lists[g_pageParams.kitUUID].items[b].locationPack,c)==-1){c.push(kitLIE_lists[g_pageParams.kitUUID].items[b].locationPack)}}if(a.length>0){$("#kitLIE_locationStorage").autocomplete({target:$("#kitLIE_locationStorages"),source:a,callback:function(g){var f=$(g.currentTarget);$("#kitLIE_locationStorage").val(f.text());$("#kitLIE_locationStorage").autocomplete("clear")}});$("#kitLIE_locationStorage").autocomplete("clear")}if(c.length>0){$("#kitLIE_locationPack").autocomplete({target:$("#kitLIE_locationPacks"),source:c,callback:function(g){var f=$(g.currentTarget);$("#kitLIE_locationPack").val(f.text());$("#kitLIE_locationPack").autocomplete("clear")}});$("#kitLIE_locationPack").autocomplete("clear")}$("#kitLIE_deleteForm").off("click",kitLIE_deleteClickHandler).on("click",kitLIE_deleteClickHandler);$("#kitLIE_submitForm").off("click",kitLIE_saveClickHandler).on("click",{apiResponse:d},kitLIE_saveClickHandler);$("#kitLIE_form").submit({apiResponse:d},kitLIE_saveClickHandler)});